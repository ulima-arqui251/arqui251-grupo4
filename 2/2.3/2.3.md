## 2.3. Restricciones

Las restricciones del sistema **Desmodus App** se presentan tanto a nivel general como específicas por módulo, y están basadas en las decisiones arquitectónicas, tecnológicas y de negocio adoptadas, con el objetivo de garantizar la interoperabilidad, portabilidad, rendimiento y escalabilidad de la solución.

---

### Restricciones Generales del Sistema

- **Aplicación móvil obligatoria en Flutter:**  
  La aplicación debe desarrollarse exclusivamente utilizando el framework **Flutter** para garantizar la compatibilidad multiplataforma (Android e iOS). Se restringe el uso de otros frameworks móviles como React Native, Ionic o desarrollo nativo.
- **Backend exclusivo con FastAPI:**  
  Todos los servicios backend deben implementarse obligatoriamente utilizando **FastAPI** en Python, debido a su rendimiento y compatibilidad con OpenAPI. Se restringe el uso de otros frameworks como Django REST Framework, Flask o Node.js.
- **Base de datos relacional con PostgreSQL:**  
  La persistencia de datos debe realizarse únicamente en **PostgreSQL**, restringiendo el uso de bases de datos NoSQL como MongoDB o bases embebidas como SQLite.

- **Comunicación REST síncrona:**  
  La interacción entre la aplicación y el backend debe realizarse exclusivamente mediante llamadas **HTTP REST** síncronas con respuesta en JSON. Se restringe el uso de WebSockets, gRPC o comunicación asíncrona basada en brokers de mensajes.

- **Autenticación JWT obligatoria:**  
  El sistema debe implementar un mecanismo de autenticación basado en **JSON Web Tokens (JWT)**. Se restringe el uso de cookies o sesiones persistentes en el backend.

  ***

### Restricciones por Módulo

#### Módulo 1: Registro y Autenticación de Usuarios

- **Autenticación interna:**  
  El sistema debe gestionar internamente el registro, login y validación de usuarios mediante **FastAPI** y **JWT**, restringiendo el uso de proveedores externos como Firebase o Auth0.

- **Datos en PostgreSQL:**  
  Toda la información del usuario (correo, nombre, contraseña encriptada, rol, fecha de registro) debe almacenarse exclusivamente en **PostgreSQL**.

---

#### Módulo 2: Detección y Reporte de Murciélagos

- **Carga de imágenes local obligatoria:**  
  La captura de imágenes se realiza directamente desde la app **Flutter**. Se restringe el uso de URLs externas o carga desde otras aplicaciones.

- **Inferencia externa opcional:**  
  La detección de murciélagos se puede procesar en la nube si la imagen cumple con criterios de calidad, restringiendo el procesamiento en dispositivos de gama baja por rendimiento.

- **Datos georreferenciados requeridos:**  
  Todos los reportes deben incluir coordenadas GPS válidas capturadas por el dispositivo. No se permite el ingreso manual de ubicaciones.

---

#### Módulo 3: Mapa de Avistamientos

- **Uso exclusivo de Flutter Map con Leaflet:**  
  La visualización de avistamientos en el mapa debe realizarse con **Flutter Map**, una implementación basada en **Leaflet**. Se restringe el uso de otras librerías de mapas como Google Maps por licenciamiento y dependencia.

- **Carga segmentada por región:**  
  Los datos del mapa deben cargarse según la zona visible en pantalla, restringiendo la descarga completa de todos los reportes por defecto.

- **Solo lectura:**  
  El mapa es solo para visualización. La creación o edición de reportes no puede hacerse desde el mapa.

---

#### Módulo 4: Panel Informativo y Chatbot

- **Contenido predefinido:**  
  El panel educativo y el chatbot utilizan contenido fijo y validado por expertos. Se restringe el uso de IA generativa en tiempo real por riesgos de desinformación.

- **Chatbot offline parcial:**  
  El chatbot debe ofrecer respuestas preprogramadas disponibles localmente. Solo respuestas actualizadas requieren conexión. Se restringe la dependencia total de servicios externos.

- **Uso exclusivo de lenguaje natural básico:**  
  El chatbot debe operar con lógica de coincidencia de patrones y flujos conversacionales simples, restringiendo modelos de comprensión profunda como BERT o GPT.

---

#### Módulo 5: Gestión de Reportes y Estadísticas

- **Consulta agregada por usuario:**  
  Los usuarios solo pueden acceder a sus propios reportes y estadísticas consolidadas. Se restringe el acceso a datos de otros usuarios por políticas de privacidad.

- **Estadísticas desde backend:**  
  Todos los cálculos estadísticos deben realizarse en el backend y enviarse ya procesados a la app. Se restringe el procesamiento estadístico en el cliente.

- **Intervalo de actualización fijo:**  
  Las estadísticas se actualizan con una periodicidad determinada (por ejemplo, cada 24 horas), restringiendo el cálculo en tiempo real.
